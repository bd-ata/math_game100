<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>數字配對遊戲 - 隨機合計為100</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
        }
        #game {
            width: 400px;
            margin: 20px auto;
            display: grid;
            grid-template-columns: repeat(5, 70px);
            grid-gap: 10px;
            justify-content: center;
        }
        .number {
            width: 70px;
            height: 70px;
            background-color: #87CEFA;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            border-radius: 5px;
            user-select: none;
            border: none;
        }
        .matched {
            background-color: #32CD32;
            cursor: default;
            visibility: hidden;
        }
        #timer {
            font-size: 24px;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<h1>數字配對遊戲 - 隨機合計為100</h1>
<p>點擊兩個數字，使其加總為 <strong>100</strong>，它們將會消失。</p>
<div id="timer">時間：<span id="time">0</span> 秒</div>
<div id="game"></div>

<script>
    let selectedNumbers = [];
    const gameContainer = document.getElementById('game');
    let startTime, timerInterval;

    // 生成隨機數字並確保可以配對成合計為100
    function generateNumbers() {
        const numbers = [];
        const pairs = 10; // 需要的數字對數量，總數字為 pairs * 2

        for (let i = 0; i < pairs; i++) {
            let num = Math.floor(Math.random() * 91) + 5; // 生成5到95之間的隨機數
            let complement = 100 - num;

            // 確保互補數在範圍內，並且兩個數字不相同
            while (complement < 5 || complement > 95 || complement === num) {
                num = Math.floor(Math.random() * 91) + 5;
                complement = 100 - num;
            }

            numbers.push(num, complement);
        }

        return numbers;
    }

    // 將數字隨機排列
    function shuffle(array) {
        array.sort(() => Math.random() - 0.5);
    }

    // 初始化遊戲
    function initGame() {
        const numbers = generateNumbers();
        shuffle(numbers);
        numbers.forEach(num => {
            const numberButton = document.createElement('button');
            numberButton.classList.add('number');
            numberButton.textContent = num;
            numberButton.addEventListener('click', () => selectNumber(numberButton, num));
            gameContainer.appendChild(numberButton);
        });
        startTimer();
    }

    // 處理點擊事件
    function selectNumber(element, num) {
        if (element.classList.contains('matched') || selectedNumbers.some(item => item.element === element)) {
            return;
        }
        element.style.backgroundColor = '#FFA500';
        selectedNumbers.push({element, num});

        if (selectedNumbers.length === 2) {
            const sum = selectedNumbers[0].num + selectedNumbers[1].num;
            if (sum === 100) {
                selectedNumbers.forEach(item => {
                    item.element.classList.add('matched');
                    item.element.textContent = '';
                });
                // 檢查是否遊戲結束
                if (document.querySelectorAll('.number:not(.matched)').length === 0) {
                    stopTimer();
                    setTimeout(() => {
                        alert('恭喜！你完成了遊戲，總用時：' + document.getElementById('time').textContent + ' 秒');
                    }, 500);
                }
            } else {
                // 如果不匹配，恢復原狀
                setTimeout(() => {
                    selectedNumbers.forEach(item => {
                        item.element.style.backgroundColor = '#87CEFA';
                    });
                    selectedNumbers = [];
                }, 500);
                return;
            }
            selectedNumbers = [];
        }
    }

    // 計時器
    function startTimer() {
        startTime = Date.now();
        timerInterval = setInterval(() => {
            const elapsedTime = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById('time').textContent = elapsedTime;
        }, 1000);
    }

    function stopTimer() {
        clearInterval(timerInterval);
    }

    initGame();
</script>

</body>
</html>
